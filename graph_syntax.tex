\newcommand{\st}{ \ | \ }

\section{Requirements for New Graph Syntax}
The ultimate goal of the new graph--based syntax presented here is to be able to 
fully describe the general structure of an MDAO problem indpendently of any solution information, 
while still being able to accomodate the more specific case when a solution 
strategy is applied. In order to achieve that goal 
the graph needs to accomodate a number of constructs of MDAO problems: 

\begin{itemize}
    \item Analysis tools and connections between them
    \item Design variables, objectives, and constraints
    \item Local and global properties
    \item Coupling between analyses
    \item Multi-fidelity analyses
\end{itemize}

Beyond those basic constructs, there are also three phases of a design process that 
all need to be representable with the new syntax. Firstly there is the initial problem definition
phase where the specific analysis tools and design goals are identified. At the end of this phase, 
a single formal problem formulation is selected specifying design variables, constraints, objectives, 
analysis tools, etc. Lastly some specifc procedure for solving the problem is selected, for example 
picking an MDAO optimization architecture. Using the proposed graph syntax, each of these phases 
can be represented with a related graph. 

\begin{itemize}
    \item Maximal Connectivity Graph (MCG)
    \item Fundamental Problem  (FPG)
    \item Problem Solution Graph (SPG)
\end{itemize}

The \emph{maximal connectivity graph} represents the first phase with all 
analysis codes being considered and all possible connections between them also present. The second graph 
is \emph{fundamental problem formulation graph}, which is the smallest possible graph 
that still fully defines a given problem formulation. Finally, a \emph{specific problem formulation} 
may be represented by including additional edges and node types to represent the 
solution strategy being employed to solve the problem. 

The relationship between these three graphs is depicted in Figs.~\ref{f:tree} and \ref{f:hourglass}. 
The tree diagram demonstrates the fact that it is generally possible to obtain 
multiple FPGs from a single maximal connectivity graph. This  may correspond to 
different down--selections of analysis codes, different connections between them, 
or both. Each down--selection shrinks the number of possible FPGs that could be reached 
untill only one is remaining. Then, from a single FPG, different PSGs may be obtained by implementing 
different solution strategies. If you consider the size of a graph to be the sum of all its
edges and nodes then the hourglass shape in Fig. \ref{f:hourglass} illustrates how
the MCG gets reduced to a single FPG, then multiple possible PSGs exist to solve the problem.
In other words the FPG is obtained from the MCG by removing nodes and edges, 
and the PSG is obtained from the FPG by adding nodes and edges.

\begin{figure}[htb!]
    \centering
    \subfigure[number of possible graphs]{
    \includegraphics[width=2.0in]{images/tree}
    \label{f:tree}
    }
    \subfigure[graph size]{
    \includegraphics[width=2.0in]{images/hourglass}
    \label{f:hourglass}
    }
\caption{The relationship between the MCG, FPG, and PSG.}
\end{figure}



%the relevant MDAO constructs from the given grah primatives. Next we show how to construct 
%the MCG, FPG, and SPF graphs from those constructs and demonstrate methods to transition between 
%them.

\section{Syntax Definition}
In the rest of this section we present the necessary graph theory fundamentals to 
construct any of the different graphs discussed above. 
The notation used in this work is adapted from Diestel \cite{Diestel2010}. 
A \emph{graph} is a pair $G = (V,E)$ of sets such that $E \subseteq V \times V$, 
which means that the elements of $E$ are 2--element subsets of $V$. The set $V$ 
contains the \emph{vertices} or \emph{nodes} and the set $E$ contains the \emph{edges}.
For a \emph{directed graph*} we construct $E$ as a set of ordered pairs instead 
of a set of sets. Each ordered pair represents an edge starting at the node 
indicated by the first entry and directed to the node indicated by the second 
entry. Edge $e$ = $(x,y)$ may be referred to simply as $xy$. For node $v \in V$ 
the edges directed out are given by $E(v)$ and the edges directed into $v$ are given 
by $E^{-1}(v)$; $E(E(v))$ is denoted as $E^2(v)$, and likewise for additional levels. 

\begin{figure}[htb!]
	\begin{center}
	\includegraphics[width=1.5in]{images/example_directed_graph}
	\end{center}
	\vspace{-20pt}
\caption{Example directed graph.}
\label{f:example directed graph}
\end{figure}
As an example, for the directed graph shown in Fig.~\ref{f:example directed graph} we have
\begin{IEEEeqnarray*}{rCl}
V & = & \{1,2,3,4,5\}, \\
E & = & \big\{(1,2),(3,2),(1,3),(3,4)\big\}.
\end{IEEEeqnarray*}

%does this belong in the analysis block section???? 
Let $I$ be a nonempty set of counting numbers such that for each $i \in I$ there is a corresponding set $A_i$. 
The set of sets $\mathcal A = \{A_i \st i \in I\}$ is called an indexed family of sets with index $i$ and 
indexing set $I$\cite{smith2006}. 
The union over this family of sets can be described in a few different ways:
\begin{equation}
\bigcup_{i \in I} A_i = \bigcup_{A \in \mathcal A} A = \{x \st x \in A \txt{ for some } A \in \mathcal A\}.
\end{equation}

Lastly, the cardinality of a set $B$ is the number of elements in $B$ and is denoted as $|B|$.


\subsection{Node and Edge Types}

There are four node types:  
\begin{description}
\item[variable: ] represents scalar or array data
\item[model:] responsible for mapping inputs to outputs
\item[expression:] simple algebreic combinations of variables (such as for 
  constraint of objective functions)
\item[driver:] control logic capable of managing iteration
\end{description}

In addition to the four node types, there are three edge types: 

\begin{description}
\item[fixed edge:] Fundamental, non-changeable property of a problem, such as 
  connections between related variable nodes. These 
edges can never be removed from a graph. 
\item[explicit edge:] Explicit exchange of information between two nodes. No node 
  can have more than a single incomming explicit edge. These edges are free and
  can be added or removed from the graph. 
\item [implicit edge:] Implicit passing of information from a driver node to a 
  variable node. A single variable node can have many incomming implicit edges. These edges are 
  free and can be added or removed from the graph. 
\end{description}

[[Insert legend for node and edge types]]

\subsection{Rules for Nodes and Edges}

The driver node and the implicit edge are only allowed to be pressent in PSGs. All 
other node and edge types can be present in any of the three graphs, subject to a 
few restrictions: 
\begin{enumerate}
\item A model node can only have one edge directed to or from another model node.
\item A model node can only have fixed edges directed in or out.
\item A model node must have at least one edge directed in and at least one edge 
  directed out.
\item If a variable node has an outgoing edge to a model node then it may not have 
  any other outgoing edges.
\item If a variable node has any incomming explicit edges, it may not have any 
  incomming implicit edges. 
\end{enumerate}

\subsection{In-degree and Out-degree}

The \emph{in-degree} of a node is the number of fixed or explicit edges directed in and 
is denoted as $\txt{deg}^-(v)$, and the \emph{out-degree} 
is the number of fixed or explicit edges directed out and it is denoted as $\txt{deg}^+(v)$.
We also define the \emph{upper in-degree limit} 

\begin{equation}
\txt{deg}_u^-(v):V \to \mathbb{N}
\end{equation} 
and the \emph{lower in-degree limit}
\begin{equation}
\txt{deg}_l^-(v):V \to \mathbb{N}.
\end{equation}
These user-specified limits govern the number of explicit edges that may be directed into a 
node for a valid graph. Consider a variable node $v$ with
$\txt{deg}_u^-(v) = \txt{deg}_l^-(v) = 1$. In this case, that node must have exactly one
incomming explicit edge or the graph is invalid. Two possiblities exist for voilating 
the limit conditions: 
\begin{description}
  \item[hole: ] The number of incomming edges is less than $\txt{deg}_l^-(v)$. 
    \begin{equation} \txt{deg}^-(v) < \txt{deg}_l^-(v) \label{e:hole} \end{equation} 

  \item[collision: ] The number of incomming edges is greater than $ \txt{deg}_u^-(v)$. 
    \begin{equation} \txt{deg}^-(v) > \txt{deg}_u^-(v) \end{equation}
\end{description} 

\section{Graph Representation of MDAO Constructs}

\subsection{Analysis Blocks and Connections}

Analysis tools take in a number input variables, then perform some work to calculate 
the values for their respective outputs. In an MDAO graph, this process is 
represented by an group of nodes and edges called an \emph{analysis block}, 
shown in Fig. \ref{f:analysis block}. Within an analysis block each variable 
node represents a single input or output and is connected 
to a single model node via a fixed edge. Note that in Fig. \ref{f:analysis block}, 
the analysis block contains two model nodes, with a single edge connecting them. 
This edge represents the necessary calculations to map given inputs 
to proper output values. If constructing a weighted graph, the weight calculation edge 
provides the opportunity to computational cost. However, it is also allowed to skip 
this edge and have both incomming and outgoing edges to variables through a single model 
node for a given analysis block. Although analysis blocks are comprised of multiple nodes and edges, since all 
the edges within them are fixed, they become fixed sub-graphs within a graph.

\begin{figure}[htb!]
    \begin{center}
    \includegraphics[width=4in]{images/analysis_block}
    \end{center}
    \vspace{-10pt}
\caption{Example analysis block. The each node type and edge type is labeled in italics and annotated parenthetically.}
\label{f:analysis block}
\end{figure}

Via the analysis block structure, we can also distinguish between input and ouptut
variable nodes. Inputs are any variable nodes that have an outgoing edge into a model 
node. Conversely, outputs are any variable nodes that have an incoming edge from a model node. 
Note that by this definition, inputs and outputs can only exist when variable nodes poses an 
edge joining them to a model node. In Fig. \ref{f:analysis block} these are labeled out as 
local inputs and local outputs. The variables are local because they are explicitely tied
to the analysis block and have no relevance without it. 

MDAO problems require that information be passed between sets of analyses. When information from the output of one analysis 
block is passed, or connected, to the input of another analysis block, a new explicit edge is added 
connecting the two variable nodes involved in the exchange. Explicit edges are free because, unlike the edges 
within an analysis block, they could be added or removed depending on the demands of the specific problem. 
In other words, explicit edges are created by engineers linking the output of one tool to the input 
of another one. Note that it is allowed for a single output to have outgoing explicit edges to multiple 
other inputs. In Fig [insert ref], an output from analysis block A is connected 
to the inputs for both blocks B and C. 

[[insert graph fig here]]

\subsection{Design Variables, Objectives, and Constraints}

Design variables, objectives, and constraints all require external decisions 
to be made about a given system to identify them. Consider 
a notional problem given by the graph in Fig. \ref{f:design vars} There are three input variables 
which, could potentially become design variables: $w$, $x$, and $y$. Because the output, $x$, of $A$
is connected to the input, $x$, of $B$ x can't actually be a design variable. The inputs $w$ and $y$
have no incomming edges and could each be selected as design variables. 

\begin{figure}[htb!]
  \begin{center}
    \includegraphics[width=.6\textwidth]{images/design_vars_graph}
  \end{center}
  \caption{Notional graph with two potential design variables \label{f:design vars}}
\end{figure}

More formally, any input variable that can be defined as a hole by Eqn. \ref{e:hole}
would be considered a design variable in the graph. When working with a MCG or FPG, only fixed and explicit edges are allowed, 
in which case a design variable is simply a variable node with no incomming edges. For a valid PSG 
any design variable node would have at least one (but possible multiple) incomming 
implicit edge from a driver node. 

Objective and constraints are also constructs that need to be identified by engineers 
as part of the design process. In the case of objective functions single output values 
could be selected, but commonly multiple values are assembeled together via simple 
athrimetic opperations to form the final objective function. For example, the problem from 
Fig. \ref{f:design vars} might have an objective function of $z^2$ or $2y + z$. Constraints are 
always given in the form of either an inequality of an equality, e.g. 
$\frac{2y}{10}-1<0$ or $3x+2y - 5=0$. In both cases, an engineer explictly identifies variables 
or groups of variables and assigns a simple, explicit relationship between them. 

For the proposed syntax, objectives and constraints are represented through the use of 
expression nodes. These nodes contain the actual mathematical expression used to define the 
objective or constraint value. Objective or constraint nodes are distinguished
via the presence of a simple expression (objective) vs an inequality/equality (constraint). 
Fig. \ref{f:obj-cons} shows the notional problem graph augmented with objective and 
constraint values. 

\begin{figure}[htb!]
  \begin{center}
    \includegraphics[width=.6\textwidth]{images/obj_const_graph}
  \end{center}
  \caption{Notional graph with and objective and constraint nodes \label{f:obj-cons}}
\end{figure}

\begin{comment}
The MDO problem formulation concepts represented by nodes are given in 
Table \ref{t:node representation}, and the concepts represented by edges are 
given in Table \ref{t:edge representation}.
% \begin{itemize}
% \item An objective or constraint is indicated by a variable node with no outgoing edges and with the incoming edges being directed from only other variable nodes.
% \item A global input is a variable node with no edges directed in and with at least two edges directed out to different variable nodes.
% \item A design variable is represented by a variable node with no edges directed in and on fixed edge directed out.
% \end{itemize}
\begin{table}[h!]
 \begin{center}
  \caption{Problem formulation concept represented by a node}
  \label{t:node representation}
  \begin{tabular}{ccc} \hline 
edges directed in & edges directed out & node representation \\ \hline
only explicit edges & none & objective or constraint\\
none & at least two explicit edges & global input \\
none & one fixed edge & design variable \\ \hline
  \end{tabular}
 \end{center}
 \vspace{-15pt}
\end{table}
\begin{table}[h!]
 \begin{center}
  \caption{Problem formulation concept represented by an edge}
  \label{t:edge representation}
  \begin{tabular}{ccc} \hline 
from node & to node & edge representation \\ \hline
variable & variable & connection/passing of a variable\\
variable & model & local input \\
model & variable & local output \\
model & model & function call \\ \hline
  \end{tabular}
 \end{center}
 \vspace{-15pt}
\end{table}
%`Connection' edges connect the local outputs from one analysis block to input nodes.
\end{comment}


\subsection{Local vs Global Nodes}

A simple definition of a global node is any node that involves information 
from more than one analysis block. Likewise, a local node is any node 
that involves information from only a single analysis block. As stated before, variable 
nodes with fixed edges directed to model nodes (as part of an analysis block) are inherently local 
and similarly model nodes are also local. Expression and driver nodes
are not inherently local or global though. For these, their locality is determined 
by the incomming and outgoing edges they posses. Consider the graph in Fig [insert ref], 
where the expression node $g$ represents some kind of constraint for the optimziation problem. 
Since $g$ only had edges comming from analysis block $B$, it would be considered a local constraint 
on block $B$. 

[[insert graph here]]

Although we've already established that variable nodes in an analysis block are local to that 
block, global design variables are a part of many MDAO problems. We've previously defined 
a design variable as any 

While this simple definition is valid, it glosses over a more subtle aspect of 
some MDAO problems. Consider the graph in Fig. [insert ref], with three analysis 
blocks A, B, and C. The expression node, $g$, is a constraint that requires information 
from $A$ and $B$, so it would be considered global by the previous definition. Since $g$
has incomming edges from block $C$, it would not be global with respect to $C$. 
You could say that $g$ is local to the group $A,B$. In this sense, locality 
becomes a relative term. A given node can be local to a specific sub-graph of a large
problem. This subtle structure can become significant when determining how to partition 
an MDAO problem for use with certain MDAO architectures. Martins and Marriage 
demonstrate how Collaborative Optimization outperforms MultiDisciplinary Feasible
when they separated a problem into two sub-problems with variables, objectives, and 
constraints local to each one\cite{Marriage2008a}. 


\subsection{Coupling Between Analyses}

\subsection{Multi-fidelity Analyses}

\section{Building MCG, FPG, and PSG}


\subsection{Maximal Connectivity Graph}
To construct the maximal connectivity graph, we assume that a set of codes, global inputs, and objectives and constraints (collectively called global outputs) are provided. The codes are represented by analysis block graphs ((ABGs?)) $A_i=(V_{A_i},E_{A_i}), \ i\in I$, where $m$ is the number of codes and $I=\{1,2,\ldots,m\}$. The global inputs are represented as a set of variable nodes $V_\txt{in}$, and the global outputs are represented by a set of variable nodes $V_\txt{out}$. 
We assume that $V_\txt{in}$, $V_\txt{out}$, and each $A_i$ are given, and that any potential connection between variables is given in the form of explicit edges in the set $C_M$. 
Then we may construct the maximal connectivity graph $M=(V_M,E_M)$ as
\begin{IEEEeqnarray*}{rCl}
V_M & = & V_\txt{in} \cup V_\txt{out} \cup \left( \bigcup_{i \in I} V_{A_i} \right), \\
E_M & = & C_M \cup \left( \bigcup_{i \in I} E_{A_i} \right),
\end{IEEEeqnarray*}
The MCG $M$ is uniquely determined by the given set of analysis blocks, the required outputs, and the given global inputs. In the cases where the set of global inputs is not known a priori, the process of obtaining the FPG will reveal the required inputs, as discussed subsequently.

\subsection{Fundamental Problem Formulation Graph}
We now define the fundamental problem formulation graph $F=(V_F,E_F)$ as a directed graph meeting the following conditions, which are explained subsequently,
\begin{enumerate}
\item[(1)] $\displaystyle{I_F \subset I}$ such that the remaining conditions hold
\item[(2)] $\displaystyle{ \forall i \in I_F, \ \exists v \in V_{A_i} \txt{ with } t_\txt{node}(E^{-1}(v))=\txt{`model'} \txt{ and } \txt{deg}^+(v)>0 }$
%\item[(3)] $\displaystyle{ \forall i \in I, \forall v \in V_{A_i} \txt{ with } t_\txt{node}(v) = \txt{`variable,'} \  \txt{deg}_l^-(v) < \txt{deg}^-(v) \leq \txt{deg}_u^-(v)}$
%\item[(3)] $\displaystyle{ \forall i \in I, \forall v \in V_\txt{out} \txt{ with } t_\txt{node}(v) = \txt{`variable,'} \  \txt{deg}_l^-(v) < \txt{deg}^-(v) \leq \txt{deg}_u^-(v)}$
\item[(3)] $\displaystyle{V_{\txt{in},F} = \{v \in V_\txt{in} \st \txt{deg}^+(v) > 0\} }$ ((maybe this should be 1 instead of 0 to match the previous definition of global input))
\item[(4)] $\displaystyle{V_F = V_{\txt{in},F} \cup V_\txt{out} \cup \left( \bigcup_{i \in I_F} V_{A_i} \right)}$
\item[(5)] $\displaystyle{E_F = C_F \cup \left( \bigcup_{i \in I_F} E_{A_i} \right), \ C_F \subset C_M}$
\item[(6)] $\displaystyle{\forall v \in V_F \txt{ with } t_\txt{node}(v) = \txt{`variable,'} \  \txt{deg}_l^-(v) \leq \txt{deg}^-(v) \leq \txt{deg}_u^-(v)}$
\end{enumerate}
The set $I_F$ is an index set containing the indices of the analysis blocks in $F$ and it may only include the analysis blocks $A_i$ that meet requirements (2) and (6). 
Requirement (2) stipulates that each analysis blocks in $F$ must have at least one local output that is being used. 
Requirement (3) stipulates that only the global inputs that are being used should be included. 
Requirements (4) and (5) provide the construction of the sets of nodes and edges, respectively. 
Lastly, requirement (6) stipulates that the number of edges directed into the variable nodes must be within the lower and upper in-degree limits; if $\txt{deg}^-(v) < \txt{deg}_l^-(v)$ the node is called a \emph{hole}, and if $\txt{deg}^-(v) > \txt{deg}_u^-(v)$ the node is called a \emph{collision}. 

The set $C_F$ is a set containing explicit edges representing connections. Since $C_M$ is the set of all potential connections, we must have $C_F \subset C_M$. While no other conditions are explicitly stated for $C_F$, requirement (6) is actually a requirement on both $I_F$ and $C_F$.

\subsection{Obtaining the Fundamental Problem Graph}
In general, there may be multiple different graphs that satisfy the FPG conditions, though there may be none at all. Here, we describe a process for obtaining an FPG by starting with the MCG and disconnecting explicit edges until the FPG conditions are met. Then the problem is reduced to deciding which explicit edges to remove.

%Then, mathematically, the FPG starts with $\mathcal A_1 = \{1,\ldots,m\}$, $I_{F,1} = I$, and $C_{F,1} = C_M$.
Then, mathematically, the FPG starts with $C_{F,0} = C_M$, $E_{F,0} = E_M$, $V_{F,0} = V_M$.
The nodes where $\txt{deg}^-(v) < \txt{deg}_l^-(v)$ are considered first.
\begin{enumerate}
\item The first step is to detect holes and disconnect the explicit edges following them. These explicit edges are removed because they represent variables which cannot be determined because the analysis function does not have adequate inputs. The set of variable nodes which are holes is created as
\begin{equation}
H = \{v \in V_M \st t_\txt{node}(v) = \txt{`variable'} \txt{ and } \txt{deg}^-(v) < \txt{deg}_l^-(v) \},
\end{equation}
which is the set of variable nodes with fewer incoming edges than are allowed by the lower in-degree limit.
Then the updated set of edges is created by removing the first set of explicit edges following the hole:
\begin{equation}
C_{F,1} = C_{F,0} \setminus \{(x,y) \in E_M \st x=E_M^3(v) \txt{ for } v \in H\},
\end{equation}
%deg-v is now recaculated for the new C. 
and this step is demonstrated by Fig.~\ref{f:hole}. Because removing these edges can create new holes, this step must be repeated until no more holes are found.
\begin{figure}[htb!]
	\begin{center}
	\includegraphics[width=3in]{images/analysis_block_hole}
	\end{center}
	\vspace{-20pt}
\caption{Example variable node indicating a hole.}
\label{f:hole}
\end{figure}

\item The second step is to detect collisions and to then disconnect enough explicit edges so that the collisions are resolved. The set of variable nodes which contain collisions is created as
\begin{equation}
S_\txt{nodes} = \{v \in V_M \st t_\txt{node}(v) = \txt{`variable'} \txt{ and } \txt{deg}^-(v) > \txt{deg}_u^-(v) \}.
\end{equation}
For each collision node we can construct a set contained the edges directed in. The set containing all of these sets is constructed as
\begin{equation}
S_\txt{edges} = \big \{ \{(x,y) \in E_M\} \st y \in S_\txt{nodes} \big \}
\end{equation}
Let $J=\{1,2,\ldots,|S_\txt{edges}|\}$ be an indexing set for $S_\txt{edges}$ such that each $S_{\txt{edges},j}$ corresponds to a set in $S_\txt{edges}$ for $j \in J$. 
An example collision is shown in Fig.~\ref{f:collision} to indicate the definition of $S_{\txt{edges},j}$. 
We can assume that $J$ also indexes $S_\txt{nodes}$ because there is a one--to--one correspondence between the elements in $S_\txt{nodes}$ and the elements in $S_\txt{edges}$ (which are sets). 
Then we may construct sets of edges as
\begin{equation}
B_j = \big \{e_k \in S_{\txt{edges},j} \st k \in \{1,2,\ldots,K\} \txt{ with } K \leq \txt{deg}_u^-(v_j) \big \}, \ j \in J,
\end{equation}
which means that each set $B_j$ is constructed from the set $S_{\txt{edges},j}$ by taking only as many edges as are allowed by the upper in--degree limit of $v_j$. The construction of each $B_j$ corresponds to making a decision on which edges to include and which edges not to include. Then let
\begin{equation}
C_{F,2} = \{ e \in C_{F,1} \st e \in B_j \txt{ for some } j \in J\},
\end{equation}
\begin{equation}
E_{F,2} = E_M \setminus (C_M \setminus C_{F,2})
\end{equation}
and
\begin{equation}
F_2 = (V_M,E_{F,2})
\end{equation}
\begin{figure}[htb!]
	\begin{center}
	\includegraphics[width=3in]{images/analysis_block_collision}
	\end{center}
	\vspace{-20pt}
\caption{Example variable node indicating a collision.}
\label{f:collision}
\end{figure}

\item The third and final step is to remove any unused nodes and edges. The indexing set for only the analysis blocks with at least one used local output may be constructed as
\begin{equation}
I_F =  \{i \in I \ | \ \exists v \in V_{A_i} \txt{ such that }  t_\txt{node}(E_{F,2}^{-1}(v))=\txt{`model'} \txt{ and } \txt{deg}^+(v) > 0 \},
\end{equation}
where the degree is calculated with respect to $F_2$. This set excludes both the analysis blocks that were unused in the original MCG and those that became unused in step 1 or step 2.

The set of used global inputs is constructed as
\begin{equation}
V_{\txt{in},F} = \Big\{v \in V_\txt{in} \ \Big| \ |\{(x,y) \in E_{F,2}(v) \st y \in V_{A_i} \txt{ for } i \in I_F  \}| > 1 \Big\},
\end{equation}
which requires that at least two edges directed out of the nodes in $V_{\txt{in},F}$ must be to the analysis blocks indexed by $I_F$.

Finally, the set of nodes and edges describing a fundamental problem formulation is given by
\begin{equation}
V_F = V_{\txt{in},F} \cup V_\txt{out} \cup \left( \bigcup_{i \in I_F} V_{A_i} \right),
\end{equation}
\begin{equation}
C_{F} = \{ (x,y) \in C_{F,2} \st x,y \in V_F\},
\end{equation}
\begin{equation}
E_F = C_F \cup \left( \bigcup_{i \in I_F} E_{A_i} \right),
\end{equation}
\begin{equation}
F = (V_F,E_F).
\end{equation}


%Let $F_2 = (V_M,C_{F,2})$ be an undirected graph, which is to say to disregard the directions associated with $C_{F,2}$. 


%Fixed edges are fixed only with respect to the analysis block in which they reside, it is okay to remove them along with the entire analysis block.

\end{enumerate}



    \subsection{Solution Graph Syntax}
    What is the difference between a problem formulation and a problem solution method? Convert from a cyclic graph, to an acyclic graph
    \begin{itemize}
        \item Cycles indicate convergence loops or design variable loops
        \item Problem can't be solved until all loops are *removed* by adding solvers/optimizers
        \item *Special* nodes for solvers and optimizers that *break* loops (from an algorithmic point of view)
        \item FPG represents the minimal amount of information necessary to define a problem
        \item Any solution path grows the graph complexity by adding edges and nodes (or possibly have an empty solution graph, which you build up
        as you remove edges from problem formulation graph?)
    \end{itemize}
